# News Bot

Fetches RSS/Atom feeds and posts articles as on-chain transactions on Base.

## Setup

### config.json

Create a `config.json` in the `news/` directory:

```json
{
  "encryptionPassword": "your-secret-password",
  "feeds": [
    "https://example.com/rss",
    "https://other-site.com/feed.xml"
  ],
  "maxPostLength": 500,
  "pollIntervalSeconds": 300,
  "rpcUrl": "https://mainnet.base.org"
}
```

| Field | Required | Default | Description |
|-------|----------|---------|-------------|
| `rpcUrl` | Yes | | Base RPC endpoint URL |
| `feeds` | Yes | | List of RSS/Atom feed URLs |
| `encryptionPassword` | No | `yourplace-news-bot-default-key!!` | Password used to encrypt the wallet private key at rest |
| `maxPostLength` | No | `500` | Maximum character length per post |
| `pollIntervalSeconds` | No | `300` | Seconds between feed polling cycles |

### wallet.json

The wallet file is stored at `Bots/wallet.json` (parent directory) and is shared across all bots.

On first run, if no `wallet.json` exists, the bot automatically generates a new Ethereum keypair, encrypts the private key with `encryptionPassword`, and saves it. The bot prints the new wallet address to the console.

Fund this address with ETH on Base to pay for transaction gas fees.

The wallet file contains:

```json
{
  "address": "0x...",
  "encryptedPrivateKey": "<base64-encoded AES-256-GCM encrypted key>",
  "publicKey": "0x..."
}
```

The private key is encrypted using AES-256-GCM with a key derived from `encryptionPassword` via PBKDF2 (100k iterations, SHA3-512). Do not edit this file manually.

## Usage

```sh
make              # continuous polling
make run_single   # post only the latest article from each feed, then exit
```

### Flags

| Flag | Default | Description |
|------|---------|-------------|
| `-config` | `config.json` | Path to config file |
| `-data` | `data` | Path to data directory (stores dedup database) |
| `-once` | `false` | Process all unposted articles once, then exit |
| `-single` | `false` | Post only the latest article from each feed, then exit |
